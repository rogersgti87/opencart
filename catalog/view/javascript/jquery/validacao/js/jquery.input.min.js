$.fn.blockInput=function(options){function findDelta(value, prevValue){var delta='';for (var i=0; i < value.length; i++){var str=value.substr(0, i) + value.substr(i + value.length - prevValue.length);if(str === prevValue) delta=value.substr(i, value.length - prevValue.length);}return delta;}function isValidChar(c){return new RegExp(options.regex).test(c);}function isValidString(str){for (var i=0; i < str.length; i++) if (!isValidChar(str.substr(i, 1))) return false;return true;}this.filter('input,textarea').on('input', function (){var val=this.value,lastVal=$(this).data('lastVal');var inserted=findDelta(val,lastVal);var removed=findDelta(lastVal,val);var pasted=inserted.length > 1 || (!inserted && !removed);if(pasted){if(!isValidString(val)) this.value=lastVal;}else if(!removed){if(!isValidChar(inserted)) this.value=lastVal;}$(this).data('lastVal',this.value);}).on('focus',function(){$(this).data('lastVal', this.value);});return this;};